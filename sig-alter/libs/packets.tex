%% packages for figures
\usepackage{graphicx}
\usepackage{color}
\usepackage{subfigure}
\usepackage{graphics}

\usepackage{tikz}

%% packages for citation
\usepackage[sort]{cite}

%% packages for math
\usepackage{bbm}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{latexsym}

% This package reimplements the LATEX verbatim and verbatim* environments.
% In addition it provides a comment environment that skips any
% commands or text between \begin{comment} and the next \end{comment}.
\usepackage{verbatim}

% The pack­age trans­lates var­i­ous stan­dard and other in­put en­cod­ings into a 
% ‘LATEX in­ter­nal lan­guage’. The in­ter­nal lan­guage is ex­pressed en­tirely in
% TEX's base en­cod­ing (stan­dard ASCII print­able char­ac­ters, car­riage con­trol
% to­kens and TEX con­trol se­quences, the lat­ter mostly de­fined by LATEX).
\usepackage[latin1]{inputenc}


%% packages for multirow
\usepackage{multirow}

%% packages for url
\usepackage{url}

% captions and subcaptions
% \usepackage[caption=false,position=bottom]{subfig}
\usepackage{caption}
\let\subcaption\relax
\let\subfloat\relax
%\usepackage{subcaption}
% \usepackage[caption=false,position=bottom]{subcaption}
% \let\subbottom\subfloat % to allow use of \subbottom instead of \subfloat
\captionsetup[figure]{labelfont={bf,small},textfont={it,small}}
\captionsetup[table]{labelfont={bf,small},textfont={it,small}}
\captionsetup[subfloat]{labelfont={bf,footnotesize},textfont={it,footnotesize},subrefformat=parens}

% hyperlinks, which caused some fof the grief above
%\let\captioncaption\caption
% \usepackage{aliascnt} % for custom autoref
\usepackage[colorlinks=true,linkcolor=blue,citecolor=blue,urlcolor=blue,pdftitle={Serenade}]{hyperref}
%\PassOptionsToPackage{unicode}{hyperref}

%% packages for algorithms
% \usepackage[lined,boxed,linesnumbered,commentsnumbered]{algorithm2e}
\usepackage[lined,boxed,linesnumbered]{algorithm2e}
\usepackage{algpseudocode}

% The etoolbox package is a toolbox of programming tools geared primarily towards
% LaTeX class and package authors. It provides LaTeX frontends to some of the new
% primitives provided by e-TeX as well as some generic tools which are not related to
% e-TeX but match the profile of this package.
\usepackage{etoolbox}


% use "autoref" the way I want
%   autoref is nice because the text or brackets of a ref are part of link
%   see http://tex.stackexchange.com/questions/36575/autorefs-inserted-text-has-not-the-correct-case
%       http://en.wikibooks.org/wiki/LaTeX/Labels_and_Cross-referencing
%       http://www.tug.org/applications/hyperref/manual.html#TBL-23

%% define autoref name for sections
\ifx\sectionautorefname\undefined
\def\sectionautorefname{\S\!\!}
\def\subsectionautorefname{\S\!\!}
\def\subsubsectionautorefname{\S\!\!}
\fi
% from http://tex.stackexchange.com/questions/52410/how-to-use-the-command-autoref-to-implement-the-same-effect-when-use-the-comman
\ifx\equationautorefname~#1\undefined
\def\equationautorefname~#1\null{%
  (#1)\null
}
\fi

%% change ref of algorithm from 'algorithm x' to 'Procedure x'
\renewcommand*{\algorithmautorefname}{Procedure}
\renewcommand{\algorithmcfname}{Procedure}% Update algorithm name

%% change alg settings
\setlength{\algomargin}{6mm}
\SetKwInput{Problem}{problem}
\SetKwInput{Input}{input}
\SetKwInput{Output}{output}
\SetAlgoSkip{smallskip} % default
\SetAlgoInsideSkip{smallskip} %
\setlength{\AlCapSkip}{1mm} 
\SetKwComment{tcp}{\#\ }{}
\SetKwComment{tcc}{\#\ }{}
% \SetAlFnt{\small}
% \SetAlCapFnt{\small}
% \SetAlCapNameFnt{\small}
% \SetAlCapHSkip{0pt}
% \IncMargin{-\parindent}
    
%% definitions for theorem related environment and their autoref names
\ifcsundef{theorem}{% theorem is not defined yet
\newtheorem{theorem}{Theorem}%[section]
}{}
\ifcsundef{corollary}{%
\newtheorem{corollary}{Corollary}%[theorem]
}{}
\ifcsundef{lemma}{%
\newtheorem{lemma}{Lemma}%[theorem]
}{}
\ifcsundef{definition}{%
\newtheorem{definition}{Definition}%[theorem]
}{}
\ifcsundef{fact}{%
\newtheorem{fact}{Fact}%[theorem]
}{}
\ifcsundef{remark}{%
\newtheorem{remark}{Remark}%[theorem]
}{}

%% change autoref names for theorem related
\ifx\theoremautorefname\undefined
\renewcommand{\theoremautorefname}{Theorem}
\fi
\ifx\lemmaautorefname\undefined
\newcommand*{\lemmaautorefname}{Lemma}
\fi
\ifx\definitionautorefname\undefined
\newcommand*{\definitionautorefname}{Definition}
\fi
\ifx\corollaryautorefname\undefined
\newcommand*{\corollaryautorefname}{Corollary}
\fi
\ifx\factautorefname\undefined
\newcommand*{\factautorefname}{Fact}
\fi


%% commonly used math commands
\ifx\argmax\undefined
\newcommand{\argmax}{\operatornamewithlimits{argmax}}
\fi
\ifx\argmin\undefined
\newcommand{\argmin}{\operatornamewithlimits{argmin}}
\fi
\ifx\limsup\undefined
\newcommand{\limsup}{\operatornamewithlimits{limsup}}
\fi
\ifx\liminf\undefined
\newcommand{\liminf}{\operatornamewithlimits{liminf}}
\fi
\ifx\norm\undefined
\newcommand{\norm}[1]{\lVert#1\rVert}
\fi
\ifx\abs\undefined
\newcommand{\abs}[1]{\lvert#1\rvert}
\fi
\ifx\set\undefined
\newcommand{\set}[1]{\left\{#1\right\}}
\fi
\ifx\mset\undefined
\newcommand{\mset}[1]{\lbrack #1\rbrack}
\fi
\ifx\etal\undefined
\newcommand{\etal}{{\em et al.}~}
\fi
\ifx\ie\undefined
\newcommand{\ie}{{\em i.e.,} }
\fi
\ifx\eg\undefined
\newcommand{\eg}{{\em e.g.,} }
\fi
\ifx\etc\undefined
\newcommand{\etc}{{\em etc.,} }
\fi
\ifx\wrt\undefined
\newcommand{\wrt}{{\em w.r.t.} }
\fi
\ifx\dotprod\undefined
\newcommand{\dotprod}[2]{
  \langle #1, #2 \rangle
}
\fi
\ifx\iid\undefined 
\newcommand{\iid}{i.i.d.}
\fi
\ifx\bigParenthes\undefined 
\newcommand{\bigParenthes}[1]{
  \big(#1\big)
}
\fi
\ifx\bigBracket\undefined 
\newcommand{\bigBracket}[1]{
  \big\{#1\big\}
}
\fi
\ifx\bigSqBracket\undefined 
\newcommand{\bigSqBracket}[1]{
  \big[#1\big]
}
\fi
\ifx\BigParenthes\undefined 
\newcommand{\BigParenthes}[1]{
  \Big(#1\Big)
}
\fi
\ifx\BigBracket\undefined 
\newcommand{\BigBracket}[1]{
  \Big\{#1\Big\}
}
\fi
\ifx\BigSqBracket\undefined 
\newcommand{\BigSqBracket}[1]{
  \Big[#1\Big]
}
\fi
\ifx\biggParenthes\undefined 
\newcommand{\biggParenthes}[1]{
  \bigg(#1\bigg)
}
\fi
\ifx\biggBracket\undefined 
\newcommand{\biggBracket}[1]{
  \bigg\{#1\bigg\}
}
\fi
\ifx\biggSqBracket\undefined 
\newcommand{\biggSqBracket}[1]{
  \bigg[#1\bigg]
}
\fi
\ifx\BiggParenthes\undefined 
\newcommand{\BiggParenthes}[1]{
  \Bigg(#1\Bigg)
}
\fi
\ifx\BiggBracket\undefined 
\newcommand{\BiggBracket}[1]{
  \Bigg\{#1\Bigg\}
}
\fi
\ifx\BiggSqBracket\undefined 
\newcommand{\BiggSqBracket}[1]{
  \Bigg[#1\Bigg]
}
\fi
\ifx\bracket\undefined
\newcommand{\bracket}[1]{
  \{#1\}
}
\fi
\ifx\parenthes\undefined
\newcommand{\parenthes}[1]{
  (#1)
}
\fi
\ifx\sqBracket\undefined
\newcommand{\sqBracket}[1]{
  [#1]
}
\fi
\ifx\prob\undefined 
\newcommand{\prob}[1]{\mathbb{P}[#1]}
\fi
\ifx\Prob\undefined 
\newcommand{\Prob}[1]{\mathbb{P}\big[#1\big]}
\fi
\ifx\probb\undefined 
\newcommand{\Probb}[1]{\mathbb{P}\bigg[#1\bigg]}
\fi
\ifx\expect\undefined 
\newcommand{\expect}[1]{\mathbb{E}[#1]}
\fi
\ifx\Expect\undefined 
\newcommand{\Expect}[1]{\mathbb{E}\big[#1\big]}
\fi
\ifx\expectt\undefined 
\newcommand{\expectt}[1]{\mathbb{E}\bigg[#1\bigg]}
\fi
\ifx\walk\undefined 
\makeatletter
\newcommand{\walk}[1]{%
  \@tempswafalse
  \@for\next:=#1\do
    {\if@tempswa\!\!\rightarrow\!\!\else\@tempswatrue\fi\next}%
}
\makeatother
\fi
\ifx\seq\undefined 
\newcommand{\seq}{\!=\!}
\fi
\ifx\sminus\undefined 
\newcommand{\sminus}{\!-\!}
\fi
\ifx\sm\undefined 
\newcommand{\sm}[1]{\!#1\!}
\fi
%% reduce spacing
\setlength{\textfloatsep}{8.0pt plus 1.0pt minus 2.0pt}

%% Redefining itemize to save space
\ifcsdef{sitemize}{}{
\newenvironment{sitemize}{%
  \begin{list}{$\bullet$}{%
    %\setlength{\rightmargin}{\leftmargin}
    \setlength{\itemsep}{0.1cm}%
    \setlength{\leftmargin}{1.0em}%
    \setlength{\topsep}{0.1cm}%
    \setlength{\parsep}{0mm}}%
  }{\end{list}}
}

\ifcsdef{senumerate}{}{
\newenvironment{senumerate}{%
   \begin{list}{\arabic{enumi}.}{%
    \setlength\labelwidth{3.5em}%
    \setlength\leftmargin{2.5em}%
    \setlength{\topsep}{2pt plus 2pt minus 2pt}%
    \setlength\itemsep{0.0cm}%
    \usecounter{enumi}}%
  }{\end{list}}
}

\ifcsdef{spenumerate}{}{
\newenvironment{spenumerate}{%
   \begin{list}{(\arabic{enumi})}{%
    \setlength\labelwidth{3.5em}%
    \setlength\leftmargin{2.5em}%
    \setlength{\topsep}{2pt plus 2pt minus 2pt}%
    \setlength\itemsep{0.0cm}%
    \usecounter{enumi}}%
  }{\end{list}}
}

\ifcsdef{slenumerate}{}{
\newenvironment{slenumerate}{%
   \begin{list}{(\alph{enumi})}{%
    \setlength\labelwidth{3.5em}%
    \setlength\leftmargin{2.5em}%
    \setlength{\topsep}{2pt plus 2pt minus 2pt}%
    \setlength\itemsep{0.0cm}%
    \usecounter{enumi}}%
  }{\end{list}}
}